<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<configuration>
  <driver id="iec62056p21">
    <name>IEC 62056 part 21</name>
    <description><![CDATA[
        This driver implements the communication with metering devices as an IEC 62056-21 mode A-D master, 
        which can register one or several slaves such as gas, water, heat, or electricity meters.<br>
        To uniquely identify a channel, representing single registers, an OBIS code of the format A-B:C.D.E*F 
        or an older EDIS code of the format C.D.E is used.<br><br>
        For a list of all valid identifiers, consult the list of standardized OBIS codes administered by the 
        DLMS UA <a href='http://dlms.com/documentation/listofstandardobiscodesandmaintenanceproces/index.html'>here</a>.
      ]]>
    </description>
    
    <deviceAddress>
      <option id="serialPort">
        <name>Serial port</name>
        <description><![CDATA[
            The physical device address to uniquely identify a physical smart meter.<br><br>
            <b>Example:</b><ol>
              <li><b>Linux</b>: /dev/ttyS0 or /dev/ttyUSB0</li>
              <li><b>Windows</b>: COM1</li>
            </ol>
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
      </option>
      <option id="address">
        <name>Device address</name>
        <description><![CDATA[
            The address to uniquely identify a device, representing an IEC62056-21 slave.<br>
            For many devices, this is a number that can be read off a label on the meter.<br><br>
            <i>If left empty, a single meter can be addressed without an identifier.<i>
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>STRING</type>
      </option>
    </deviceAddress>
    
    <deviceSettings>
      <option id="password">
        <name>Password</name>
        <description><![CDATA[
            Authorization password to access the meters programmable mode.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>STRING</type>
      </option>
      <option id="timeout">
        <name>Timeout</name>
        <description><![CDATA[
            The timeout, after which the blocking call to read from the serial port will be canceled.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <default>5000</default>
      </option>
      <option id="verify">
        <name>Verify connection</name>
        <description><![CDATA[
            Verify if data can be read from the device, when opening the connection.<br>
            This may cause problems, for instable connections.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>BOOLEAN</type>
        <default>true</default>
      </option>
      <option id="handleEcho">
        <name>Handle echo</name>
        <description><![CDATA[
            Tell the connection, to throw away echos of received messages.<br><br>
            Echos are caused by some optical transceivers.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>BOOLEAN</type>
        <default>false</default>
      </option>
      <option id="handshake">
        <name>Handshake</name>
        <description><![CDATA[
            Use initial handshake to negotiate baud rate.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>BOOLEAN</type>
        <default>true</default>
      </option>
      <option id="baudrateChangeDelay">
        <name>Baudrate change delay</name>
        <description><![CDATA[
            This parameter can usually be set to zero for regular serial ports. 
            If a USB to serial converter is used, you might have to use a delay of around 250ms, 
            as otherwise the baud rate may be changed before the previous message 
            (i.e. the acknowledgment) has been completely sent.<br><br>
            Only used, if an initial handshake will be performed.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <default>250</default>
      </option>
      <option id="baudrateMax">
        <name>Baudrate maximum</name>
        <description><![CDATA[
            Maximum supported baud rate for the meter.<br><br>
            Only used, if an initial handshake will be performed.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
      </option>
      <option id="baudrate">
        <name>Baudrate</name>
        <description><![CDATA[
            The baud rate for the serial communication.<br>
            Defaults are 300bd 7E1
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <default>300</default>
      </option>
      <option id="databits">
        <name>Databits</name>
        <description><![CDATA[
            The data bits for the serial communication.<br>
            Defaults are 300bd 7E1
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <selection>
          <item value="5">5</item>
          <item value="6">6</item>
          <item value="7">7</item>
          <item value="8">8</item>
        </selection>
        <default>7</default>
      </option>
      <option id="stopbits">
        <name>Stopbits</name>
        <description><![CDATA[
            The stop bits for the serial communication.<br>
            Defaults are 300bd 7E1
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <selection>
          <item value="1">1</item>
          <item value="2">2</item>
          <item value="3">1.5</item>
        </selection>
        <default>1</default>
      </option>
      <option id="parity">
        <name>Parity</name>
        <description><![CDATA[
            The parity check for the serial communication.<br>
            Defaults are 300bd 7E1
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <selection>
          <item value="0">None</item>
          <item value="1">Odd</item>
          <item value="2">Even</item>
          <item value="3">Mark</item>
          <item value="4">Space</item>
        </selection>
        <default>2</default>
      </option>
    </deviceSettings>
    
    <deviceScanSettings>
      <option id="serialPort"></option>
      <option id="timeout"></option>
      <option id="baudrate"></option>
      <option id="databits"></option>
      <option id="stopbits"></option>
      <option id="parity"></option>
    </deviceScanSettings>
    
    <channelAddress>
      <syntax>
        <keyValue>false</keyValue>
        <separator>;</separator>
      </syntax>
      <option id="identification">
        <name>Identification</name>
        <description><![CDATA[
            The ID is usually an OBIS code of the format A-B:C.D.E*F or an older EDIS code of the format C.D.E. 
            that specifies exactly what the value of this data set represents.<br>
            C is the type of the measured quantity (e.g 1 = positive active power), D describes the measurement 
            mode and E is the tariff (e.g. 0 for total or 1 for tariff 1 only) associated with this value.
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
      </option>
    </channelAddress>
  </driver>
</configuration>
