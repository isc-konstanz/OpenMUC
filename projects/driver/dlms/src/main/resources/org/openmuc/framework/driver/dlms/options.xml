<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<configuration>
  <driver id="dlms">
    <name>DLMS/COSEM</name>
    <description><![CDATA[
        This driver implements the communication with smart meters over the IEC 62056 DLMS/COSEM protocol.<br>
        The DLMS/COSEM driver uses the client library developed by the jDLMS project. Currently, the DLMS/COSEM 
        driver supports communication via HDLC and TCP/IP using Logical Name Referencing to retrieve values from the device.<br>
        Each logical device has an address in the range [0, 16383]. As an example, a meter could consist of one logical device 
        for electricity metering at address 18 and another one for a connected gas meter at address 67.<br>
        A channel references a single attribute or method of a COSEM Interface Object. To uniquely identify an Objects 
        attributeor method, the <em>Class ID</em>, the <em>Logical Name</em> and <em>Attribute</em> or <em>Method</em> ID 
        is needed.<br><br>
        For a list of all valid Logical Names and the corresponding COSEM Interface Class, consult the list of standardized 
        OBIS codes administered by the DLMS UA 
        <a href='http://dlms.com/documentation/listofstandardobiscodesandmaintenanceproces/index.html'>here</a>.
      ]]>
    </description>
    
    <deviceAddress>
      <syntax>
        <keyValue>false</keyValue>
        <separator>:</separator>
      </syntax>
      <option id="protocol">
        <name>Protocol</name>
        <description><![CDATA[
            The communication protocol used, to uniquely identify and address a physical smart meter.<br>
            Currently, the DLMS/COSEM driver supports communication via HDLC and TCP/IP using Logical Name 
            Referencing to retrieve values from the device.
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
        <selection>
          <item value="hdlc">HDLC</item>
          <item value="tcp">TCP/IP</item>
          <item value="udp">UDP</item>
        </selection>
      </option>
      <option id="serverAddress">
        <name>Physical device address</name>
        <description><![CDATA[
            The physical device address to uniquely identify a physical smart meter. 
            An optional port can be added with an additional parameter.<br>
            Address and format depend on the used protocol.<br><br>
            <b>Example:</b>
            <ol>
              <li><b>HDLC</b>: ttyUSB0 or ttyUSB0:16</li>
              <li><b>TCP</b>: 16:192.168.200.25 or 16:192.168.200.25:4059</li>
            </ol>
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
      </option>
      <option id="serverPort">
        <name>Physical device port</name>
        <description>The physical device address port to uniquely identify a physical smart meter.</description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
      </option>
      <option id="serverLogical">
        <name>Logical device address</name>
        <description><![CDATA[
            The logical device address is a 16-Bit unsigned number and is needed to identify a logical device inside a smart meter.<br>
            In most cases, there are 2 logical devices inside a smart meter with the first being a management device to get common 
            information and data about other logical devices in this smart meter while the second logical device is the smart meter 
            itself holding the tariff and measurement data.<br>
            The management device has the address 1, the address of the second device is manufacturer specific but can be read from the 
            management device. If the physical device acts as a hub for other smart meter, the number of logical devices increases 
            accordingly.<br><br>
            The logical device address is sometimes called <em>server wPort</em> or <em>server SAP</em>.
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
      </option>
      <option id="clientLogical">
        <name>Client ID</name>
        <description><![CDATA[
            The client ID defines the access level with which the client connects to the logical device. The ID 16 is a special 
            client ID, which refers to the <em>public client</em> for which no authentication or encryption is required.<br><br>
            It is also called <em>client SAP</em> or <em>client wPort</em>.
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
      </option>
    </deviceAddress>
    
    <deviceSettings>
      <syntax>
        <keyValue assignment="=">true</keyValue>
        <separator>;</separator>
      </syntax>
      <option id="PW">
        <name>Password</name>
        <description>Authorization password to access the smart meter device.</description>
        <mandatory>false</mandatory>
        <type>STRING</type>
      </option>
      <option id="SendDisconnect">
        <name>Send disconnect</name>
        <description><![CDATA[
            Send a disconnect message at DLMS layer on disconnecting from device.<br>
            Set this flag to false if the remote device is expecting the disconnect message at a lower layer (like HDLC).
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>BOOLEAN</type>
        <default>true</default>
      </option>
      <option id="UseHandshake">
        <name>Use handshake</name>
        <description><![CDATA[
            Use initial handshake to negotiate baud rate.<br><br>
            Only used for HDLC connections.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>BOOLEAN</type>
        <default>true</default>
      </option>
      <option id="Baudrate">
        <name>Baudrate</name>
        <description><![CDATA[
            Maximum supported baud rate (0 = no maximum). 
            If UseHandshake = false, this value will be used to communicate with the device and has to be set.<br><br>
            Only used for HDLC connections.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>INTEGER</type>
        <default>0</default>
      </option>
      <option id="ForceSingle">
        <name>Force single</name>
        <description><![CDATA[
            Forces every attribute to be requested individually.<br><br>
            This option has to be enabled to support Kamstrup 382 smart meter devices.
          ]]>
        </description>
        <mandatory>false</mandatory>
        <type>BOOLEAN</type>
        <default>false</default>
      </option>
      <option id="Referencing">
        <name>Referencing</name>
        <mandatory>false</mandatory>
        <type>STRING</type>
        <default>LN</default>
      </option>
    </deviceSettings>
    
    <deviceScanSettings><disabled>true</disabled></deviceScanSettings>
    
    <channelAddress>
      <syntax>
        <keyValue>false</keyValue>
        <separator>/</separator>
      </syntax>
      <option id="classId">
        <name>Class ID</name>
        <description>The COSEM class ID is a 16 bit unsigned number and can be found in the list of standardized OBIS codes.</description>
        <mandatory>true</mandatory>
        <type>INTEGER</type>
      </option>
      <option id="Logical Name">
        <name>Class ID</name>
        <description><![CDATA[
            A logical name is a 6 byte OBIS code as it is defined by the DLMS UA. It sometimes also called <em>instance ID</em>.<br>
            It can be written as hexadecimal number (e.g. 0101010800FF) or as a series of six decimal numbers separated by periods 
            A-B:C.D.E*F.<br><br>
            <b>Example:</b> The clock of a smart meter is always reachable under the address [0, 0, 1, 0, 0, 255].
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>STRING</type>
      </option>
      <option id="Attribute/Method ID">
        <name>Class ID</name>
        <description><![CDATA[
            The COSEM attribute/method ID is a 16 bit unsigned number and depends on the class ID.<br>
            It can be extracted best by consulting the document IEC 62056-6-2 or the Blue Book from the DLMS UA.<br>
            Usually the first attribute (attribute ID 1) of an COSEM interface class (IC) is the logical name of the object. 
            Further attributes refer to actual data (see section 4.5 of IEC 62056-6-2).
          ]]>
        </description>
        <mandatory>true</mandatory>
        <type>INTEGER</type>
      </option>
    </channelAddress>
    
    <channelScanSettings><disabled>true</disabled></channelScanSettings>
  </driver>
</configuration>
